{{ "cart-drawer.css" | asset_url | stylesheet_tag }}

<div
  id="cart-drawer"
  class="color-{{ section.settings.color_scheme }} gradient"
  :class="{ 'cart-open': cartOpen }">
  <button class="cart-drawer-overlay" @click="cartOpen = !cartOpen">
    <span hidden>Close</span>
  </button>
  <div class="cart-drawer__wrapper" data-ajax-cart-section>
    <div class="cart-drawer__header">
      <h2>Cart ({{ cart.item_count }})</h2>
      <div class="cart-drawer__close" @click="cartOpen = !cartOpen">
        {{- 'icon-close.svg' | inline_asset_content -}}
      </div>
    </div>

    <div class="cart-drawer__items" data-ajax-cart-section-scroll>
      {% for line_item in cart.items %}
        {% assign line_item_index = forloop.index %}

        <div class="cart-drawer__item">
          <div class="cart-item__media">
            {{ line_item.product | image_url: width: 200 | image_tag }}
          </div>
          <div class="cart-item__details">
            <div class="cart-item__heading">
              <a href="{{ line_item.url }}">
                {{ line_item.title | escape }}
              </a>
              <div>{{ line_item.final_price | money }}</div>
            </div>
            <div class="cart-item__action">
              <ajax-cart-quantity>

                <a data-ajax-cart-quantity-minus href="{{ routes.cart_change_url }}?line={{ line_item_index }}&quantity={{ line_item.quantity | minus: 1 }}">
                  {{- 'icon-minus.svg' | inline_asset_content -}}
                </a>


                <input
                  data-ajax-cart-quantity-input="{{ line_item_index }}"
                  name="updates[]"
                  value="{{ line_item.quantity }}"
                  type="number"
                  form="my-ajax-cart-form" />


                <a data-ajax-cart-quantity-plus href="{{ routes.cart_change_url }}?line={{ line_item_index }}&quantity={{ line_item.quantity | plus: 1 }}">
                  {{- 'icon-plus.svg' | inline_asset_content -}}
                </a>
              </ajax-cart-quantity>

              <div class="cart-item__remove">
                {{- 'icon-close.svg' | inline_asset_content -}}
                <a href="{{ line_item.url_to_remove }}" data-ajax-cart-request-button>Remove</a>
              </div>
            </div>
            <div data-ajax-cart-errors="{{ line_item.key }}"></div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="cart-drawer__footer">
      {% form 'cart', cart, id: 'my-ajax-cart-form' %}
        <button type="submit" name="checkout">
          Checkout â€” {{ cart.total_price | money_with_currency }}
        </button>
      {% endform %}
    </div>
  </div>
</div>