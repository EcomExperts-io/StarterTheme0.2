{% comment %}
  Renders a product card with optional variant swatches

  Accepts:
  - card_product: {Object} Product Liquid object (required)
  - show_vendor: {Boolean} Show the product vendor. Default: false
  - enable_swatches: {Boolean} Enable variant swatches display
  - swatch_trigger: {String} Product option name to use for swatches (e.g., 'Color')
  - swatch_type: {String} Type of swatch to display ('color' or 'image')
  - image_shape: {String} Image mask to apply to the product image card. Values are "arch", "blob", "chevronleft", "chevronright", "diamond", "parallelogram", and "round". (optional)

  Example usage:
  {% render 'card-product',
    card_product: product,
    show_vendor: section.settings.show_vendor,
    enable_swatches: section.settings.enable_swatches,
    swatch_trigger: section.settings.swatch_trigger,
    swatch_type: section.settings.swatch_type
  %}
{% endcomment %}

<product-card
  class="product-card card--{{ settings.card_style }}{% if settings.card_style == 'card' %} color-{{ settings.card_color_scheme }} gradient{% endif %}{% if image_shape and image_shape != 'default' %} card--shape{% endif %}"
  data-product-id="{{ card_product.id }}"
>
  <a href="{{ card_product.url }}" class="card-link-wrapper">
    <div
      class="card-media">
      <img
        src="{{ card_product.featured_image | image_url: width: 533 }}"
        alt="{{ card_product.title }}"
        class="product__media-image"
        width="{{ card_product.featured_image.width }}"
        height="{{ card_product.featured_image.height }}"
        data-product-image="{{ card_product.id }}"
      >
    </div>
    <div class="card-information">
      <h2 class="card-heading">{{ card_product.title }}</h2>
      {% if show_vendor %}
        <span class="card-vendor">{{ card_product.vendor }}</span>
      {% endif %}
      {% comment %} 
        {% if enable_swatches %}
          <div class="product-color-swatches">
            {%- for option in card_product.options_with_values -%}
              {%- if option.name == swatch_trigger -%}
                {%- for value in option.values -%}
                  {%- for variant in card_product.variants -%}
                    {%- if variant.options contains value -%}
                      <span
                        class="color-swatch"
                        style="{% if swatch_type == 'image' %}background-image: url('{{ variant.featured_image | default: card_product.featured_image |   image_url: width: 50 }}'); background-size: cover; background-position: center;{% else %}background-color: {{ value | handleize }};{%   endif %}"
                        title="{{ value }}"
                        data-variant-id="{{ variant.id }}"
                        data-variant-image="{{ variant.featured_image | default: card_product.featured_image | image_url: width: 533 }}"
                        data-swatch-color="{{ value | handleize }}"
                      ></span>
                      {%- break -%}
                    {%- endif -%}
                  {%- endfor -%}
                {%- endfor -%}
              {%- endif -%}
            {%- endfor -%}
          </div>
        {% endif %}
      {% endcomment %}
      <div class="card-pricing">
        {% render 'price', product: card_product, show_compare_at_price: true  %}
      </div>
    </div>
  </a>
</product-card>
