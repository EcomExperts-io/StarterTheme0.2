<style>
  #shopify-section-{{ section.id }} {
    {% if section.settings.show_line_separator %}
      border-bottom: 1px solid #ddd;
    {% endif %}
    position: relative;
  }
  header {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 1.5rem;
    max-width: var(--page-width);
    margin-inline: auto;
    padding: {{ section.settings.padding_top }}px 20px {{ section.settings.padding_bottom }}px;
  }
  .header-logo {
    width: auto;
    height: 60px;
  }
  nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }
  header a {
    text-decoration: none;
    color: #000;
  }
  #header-cart-bubble {
    position: relative;
    margin-right: 6px;
  }
  [data-cart-count] {
    position: absolute;
    display: grid;
    place-items: center;
    top: -4px;
    right: -6px;
    width: 16px;
    height: 16px;
    color: #fff;
    background: #000;
    font-size: 12px;
    border-radius: 10rem;
  }
  .header-actions {
    display: flex;
    gap: 1rem;
  }

  #header-search-trigger {
    cursor: pointer;
  }
  #header-search {
    position: absolute;
    inset: 0;
    background: #fff;
    display: none;
    justify-content: center;
    align-items: center;
    gap: 1rem;
  }
  #header-search.active {
    display: flex;
  }
  #header-search form {
    position: relative;
    border: 1px solid #ddd;
    width: min(600px, 100%);
    height: 40px;
    display: flex;
    justify-content: space-between;
    padding-inline: 10px;
  }
  #header-search form input {
    width: 100%;
    border: 0;
    font-size: 15px;
  }
  #header-search button {
    background: transparent;
    border: 0;
    cursor: pointer;
    padding: 0;
  }
  #header-search svg {
    width: 20px;
  }
</style>

<header>
  {%- if request.page_type == 'index' -%}<h1 style="margin: 0">{%- endif -%}
    <a href="{{ routes.root_url }}" style="display: flex">
      {%- if settings.logo != blank -%}
        {{ settings.logo | image_url: width: 900 | image_tag: class: "header-logo" }}
      {%- else -%}
        <span>{{ shop.name }}</span>
      {%- endif -%}
    </a>
  {%- if request.page_type == 'index' -%}</h1>{%- endif -%}

  <nav>
    <ul>
      {%- for link in section.settings.menu.links -%}
      <li>
        <a href="{{ link.url }}" {% if link.current %}aria-current="page"{% endif %}>
          {{- link.title | escape -}}
        </a>
      </li>
      {%- endfor -%}
    </ul>
  </nav>

  <div class="header-actions">
    <div id="header-search-trigger">
      {{'icon-search.svg' | inline_asset_content }}
    </div>

    {%- if shop.customer_accounts_enabled and section.settings.enable_customer_avatar -%}
      <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" rel="nofollow">
        {{'icon-account.svg' | inline_asset_content }}
      </a>
    {%- endif -%}

    <a href="{{ routes.cart_url }}" id="header-cart-bubble">
      {{'icon-cart.svg' | inline_asset_content }}
      <div data-cart-count>{{ cart.item_count }}</div>
    </a>
  </div>

  <div id="header-search">
    <form action="{{ routes.search_url }}" method="get" role="search">
      <input type="search" name="q" value="{{ search.terms | escape }}" placeholder="Search">
      <button aria-label="Search">
        {{- 'icon-search.svg' | inline_asset_content -}}
      </button>
    </form>
    <button id="close-header-search">
      {{- 'icon-close.svg' | inline_asset_content -}}
    </button>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const headerSearch = document.getElementById('header-search');
  
    document.getElementById('header-search-trigger').addEventListener('click', () => {
      headerSearch.classList.add('active');
    });
  
    document.getElementById('close-header-search').addEventListener('click', () => {
      headerSearch.classList.remove('active');
    });
  });
</script>  

{% schema %}
{
  "name": "Main Header",
  "class": "section-header",
  "settings": [
    {
      "type": "select",
      "id": "logo_position",
      "options": [
        {
          "value": "top-left",
          "label": "t:sections.header.settings.logo_position.options__2.label"
        },
        {
          "value": "top-center",
          "label": "t:sections.header.settings.logo_position.options__3.label"
        },
        {
          "value": "middle-left",
          "label": "t:sections.header.settings.logo_position.options__1.label"
        },
        {
          "value": "middle-center",
          "label": "t:sections.header.settings.logo_position.options__4.label"
        }
      ],
      "default": "middle-left",
      "label": "t:sections.header.settings.logo_position.label",
      "info": "t:sections.header.settings.logo_help.content"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "options": [
        {
          "value": "dropdown",
          "label": "t:sections.header.settings.menu_type_desktop.options__1.label"
        },
        {
          "value": "mega",
          "label": "t:sections.header.settings.menu_type_desktop.options__2.label"
        },
        {
          "value": "drawer",
          "label": "t:sections.header.settings.menu_type_desktop.options__3.label"
        }
      ],
      "default": "dropdown",
      "label": "t:sections.header.settings.menu_type_desktop.label",
      "info": "t:sections.header.settings.menu_type_desktop.info"
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "options": [
        {
          "value": "none",
          "label": "t:sections.header.settings.sticky_header_type.options__1.label"
        },
        {
          "value": "on-scroll-up",
          "label": "t:sections.header.settings.sticky_header_type.options__2.label"
        },
        {
          "value": "always",
          "label": "t:sections.header.settings.sticky_header_type.options__3.label"
        },
        {
          "value": "reduce-logo-size",
          "label": "t:sections.header.settings.sticky_header_type.options__4.label"
        }
      ],
      "default": "on-scroll-up",
      "label": "t:sections.header.settings.sticky_header_type.label"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "default": true,
      "label": "t:sections.header.settings.show_line_separator.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__1.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "menu_color_scheme",
      "label": "t:sections.header.settings.menu_color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__3.content",
      "info": "t:sections.header.settings.header__4.info"
    },
    {
      "type": "checkbox",
      "id": "enable_country_selector",
      "default": false,
      "label": "t:sections.header.settings.enable_country_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__5.content",
      "info": "t:sections.header.settings.header__6.info"
    },
    {
      "type": "checkbox",
      "id": "enable_language_selector",
      "default": false,
      "label": "t:sections.header.settings.enable_language_selector.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header__7.content",
      "info": "t:sections.header.settings.header__7.info"
    },
    {
      "type": "checkbox",
      "id": "enable_customer_avatar",
      "default": true,
      "label": "t:sections.header.settings.enable_customer_avatar.label",
      "info": "t:sections.header.settings.enable_customer_avatar.info"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.mobile_layout.content"
    },
    {
      "type": "select",
      "id": "mobile_logo_position",
      "options": [
        {
          "value": "center",
          "label": "t:sections.header.settings.mobile_logo_position.options__1.label"
        },
        {
          "value": "left",
          "label": "t:sections.header.settings.mobile_logo_position.options__2.label"
        }
      ],
      "default": "center",
      "label": "t:sections.header.settings.mobile_logo_position.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.spacing"
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.header.settings.margin_bottom.label",
      "default": 0
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 20
    }
  ]
}
{% endschema %}